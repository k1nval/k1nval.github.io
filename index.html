<html>

<head>
<!-- Google tag (gtag.js) -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=AW-18442687581">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-18442687581');
</script> -->
</head>

<body>
  <h1>
    Welcome to CT testing page.
  </h1>
  <div>This is where the purchase form would go</div>
  <button id="purchase">Fire purchase event</button>
  <br />
  <button id="add_to_cart">Fire Add to cart event</button>

  <script>
    registerAddToCartEvent();
    registerPurchaseEvent();

    // The random string with length 15.
    function randomTransactionId() {
      return Math.random().toString(36).slice(-5) + Math.random().toString(36).slice(-5) + Math.random().toString(36).slice(-5);
    }


    function registerAddToCartEvent() {
      document.getElementById("add_to_cart").addEventListener("click", function () {
        gtag("event", "add_to_cart", {
          currency: "USD",
          value: 7.77,
          items: [
            {
              item_id: "SKU_12345",
              item_name: "Stan and Friends Tee",
              affiliation: "Google Merchandise Store",
              coupon: "SUMMER_FUN",
              discount: 2.22,
              index: 0,
              item_brand: "Google",
              item_category: "Apparel",
              item_category2: "Adult",
              item_category3: "Shirts",
              item_category4: "Crew",
              item_category5: "Short sleeve",
              item_list_id: "related_products",
              item_list_name: "Related Products",
              item_variant: "green",
              location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
              price: 9.99,
              quantity: 1
            }
          ]
        });
      });
    }

    function registerPurchaseEvent() {
      document.getElementById("purchase").addEventListener("click", function () {
        gtag("event", "purchase", {
          transaction_id: randomTransactionId(),
          value: 25.42,
          tax: 4.90,
          shipping: 5.99,
          currency: "USD",
          coupon: "SUMMER_SALE",
          items: [
            {
              item_id: "SKU_12345",
              item_name: "Stan and Friends Tee",
              affiliation: "Google Merchandise Store",
              coupon: "SUMMER_FUN",
              discount: 2.22,
              index: 0,
              item_brand: "Google",
              item_category: "Apparel",
              item_category2: "Adult",
              item_category3: "Shirts",
              item_category4: "Crew",
              item_category5: "Short sleeve",
              item_list_id: "related_products",
              item_list_name: "Related Products",
              item_variant: "green",
              location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
              price: 9.99,
              quantity: 1
            },
            {
              item_id: "SKU_12346",
              item_name: "Google Grey Women's Tee",
              affiliation: "Google Merchandise Store",
              coupon: "SUMMER_FUN",
              discount: 3.33,
              index: 1,
              item_brand: "Google",
              item_category: "Apparel",
              item_category2: "Adult",
              item_category3: "Shirts",
              item_category4: "Crew",
              item_category5: "Short sleeve",
              item_list_id: "related_products",
              item_list_name: "Related Products",
              item_variant: "gray",
              location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
              price: 20.99,
              promotion_id: "P_12345",
              promotion_name: "Summer Sale",
              quantity: 1
            }]
        });

        // Send transaction data with a pageview if available
        // when the page loads. Otherwise, use an event when the transaction
        // data becomes available.
        // dataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.
        // dataLayer.push({
        //   event: 'purchase',
        //   ecommerce: {
        //     transaction_id: randomTransactionId(),
        //     value: 25.42,
        //     tax: 4.90,
        //     shipping: 5.99,
        //     currency: "USD",
        //     coupon: "SUMMER_SALE",
        //     items: [
        //       {
        //         item_id: "SKU_12345",
        //         item_name: "Stan and Friends Tee",
        //         affiliation: "Google Merchandise Store",
        //         coupon: "SUMMER_FUN",
        //         discount: 2.22,
        //         index: 0,
        //         item_brand: "Google",
        //         item_category: "Apparel",
        //         item_category2: "Adult",
        //         item_category3: "Shirts",
        //         item_category4: "Crew",
        //         item_category5: "Short sleeve",
        //         item_list_id: "related_products",
        //         item_list_name: "Related Products",
        //         item_variant: "green",
        //         location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
        //         price: 9.99,
        //         quantity: 1
        //       },
        //       {
        //         item_id: "SKU_12346",
        //         item_name: "Google Grey Women's Tee",
        //         affiliation: "Google Merchandise Store",
        //         coupon: "SUMMER_FUN",
        //         discount: 3.33,
        //         index: 1,
        //         item_brand: "Google",
        //         item_category: "Apparel",
        //         item_category2: "Adult",
        //         item_category3: "Shirts",
        //         item_category4: "Crew",
        //         item_category5: "Short sleeve",
        //         item_list_id: "related_products",
        //         item_list_name: "Related Products",
        //         item_variant: "gray",
        //         location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
        //         price: 20.99,
        //         promotion_id: "P_12345",
        //         promotion_name: "Summer Sale",
        //         quantity: 1
        //       }]
        //   }
        // });
      });
    }
  </script>
</body>

</html>
